<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeDAO Reddit Bot Analytics</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
            display: block;
        }
        .stat-label {
            color: #666;
            margin-top: 10px;
        }
        .activity-section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .activity-item {
            padding: 15px;
            border-left: 4px solid #667eea;
            margin-bottom: 15px;
            background: #f8f9ff;
        }
        .refresh-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
        }
        .refresh-btn:hover {
            background: #5a6fd8;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü§ñ CodeDAO Reddit Bot Analytics</h1>
            <p>Monitor your Reddit community automation</p>
            <button class="refresh-btn" onclick="loadData()">üîÑ Refresh Data</button>
        </div>

        <div class="stats-grid" id="statsGrid">
            <!-- Stats will be populated by JavaScript -->
        </div>

        <div class="activity-section">
            <h2>üìä Weekly Activity</h2>
            <div id="weeklyActivity">
                <!-- Weekly stats will be populated -->
            </div>
        </div>

        <div class="activity-section">
            <h2>üèÜ Top Active Users</h2>
            <div id="topUsers">
                <!-- Top users will be populated -->
            </div>
        </div>

        <div class="activity-section">
            <h2>üîÑ Recent Activity</h2>
            <div id="recentActivity">
                <!-- Recent activity will be populated -->
            </div>
        </div>
    </div>

    <script>
        async function loadData() {
            try {
                // In production, this would call your analytics API
                // For now, we'll simulate with mock data
                const mockData = {
                    overview: {
                        total_threads: 12,
                        total_welcomes: 45,
                        total_milestones: 3,
                        unique_users: 32
                    },
                    weekly: {
                        threads_posted: 1,
                        welcome_messages_sent: 8,
                        new_users_welcomed: 6,
                        total_engagement: 24
                    },
                    top_users: [
                        ["developer123", 5],
                        ["coder_jane", 3],
                        ["BuilderBob", 3]
                    ],
                    recent_activity: {
                        last_thread: {
                            title: "üöÄ Weekly Builder Thread - What are you building this week?",
                            date: "2024-01-15T09:00:00"
                        },
                        last_welcome: {
                            username: "newbie_dev",
                            date: "2024-01-15T14:30:00"
                        }
                    }
                };

                updateDashboard(mockData);
            } catch (error) {
                console.error('Error loading data:', error);
            }
        }

        function updateDashboard(data) {
            // Update stats grid
            document.getElementById('statsGrid').innerHTML = `
                <div class="stat-card">
                    <span class="stat-number">${data.overview.total_threads}</span>
                    <div class="stat-label">Weekly Threads Posted</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number">${data.overview.total_welcomes}</span>
                    <div class="stat-label">Welcome Messages Sent</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number">${data.overview.unique_users}</span>
                    <div class="stat-label">Unique Users Helped</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number">${data.weekly.total_engagement}</span>
                    <div class="stat-label">Weekly Engagement</div>
                </div>
            `;

            // Update weekly activity
            document.getElementById('weeklyActivity').innerHTML = `
                <div class="activity-item">
                    <strong>This Week:</strong> ${data.weekly.threads_posted} threads posted, 
                    ${data.weekly.welcome_messages_sent} welcome messages sent to 
                    ${data.weekly.new_users_welcomed} new users
                </div>
            `;

            // Update top users
            document.getElementById('topUsers').innerHTML = data.top_users.map(([user, count]) => `
                <div class="activity-item">
                    <strong>u/${user}</strong> - ${count} interactions
                </div>
            `).join('');

            // Update recent activity
            document.getElementById('recentActivity').innerHTML = `
                <div class="activity-item">
                    <strong>Latest Thread:</strong> ${data.recent_activity.last_thread?.title || 'None'}<br>
                    <small>Posted: ${data.recent_activity.last_thread ? new Date(data.recent_activity.last_thread.date).toLocaleString() : 'N/A'}</small>
                </div>
                <div class="activity-item">
                    <strong>Latest Welcome:</strong> Welcomed u/${data.recent_activity.last_welcome?.username || 'None'}<br>
                    <small>Sent: ${data.recent_activity.last_welcome ? new Date(data.recent_activity.last_welcome.date).toLocaleString() : 'N/A'}</small>
                </div>
            `;
        }

        // Load data on page load
        loadData();
        
        // Auto-refresh every 5 minutes
        setInterval(loadData, 300000);
    </script>
</body>
</html> 